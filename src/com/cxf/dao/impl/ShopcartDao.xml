<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cxf.dao.ShopcartDao">
      <resultMap id="productMap1" type="com.cxf.pojo.Product"> 
        <id property="id" column="id"/>
        <result property="productName" column="productName"/>
        <result property="stock" column="stock"/>
        <result property="price" column="price"/>
        <result property="sortId" column="sortId"/>
        <result property="imageAddress" column="imageAddress"/>
        <result property="info" column="info"/> 
    </resultMap>
     <resultMap id="shopcartMap1" type="com.cxf.pojo.Shopcart"> 
        <id property="id" column="id"/>
        <result property="userId" column="userId"/>
        <result property="amount" column="amount"/>
        <result property="price" column="price"/>
        <association property="product" column="productId" javaType="com.cxf.pojo.Product" resultMap="productMap1"/>
    </resultMap>
     <select id="test" resultType="java.lang.Integer">
        select count(id) from product
    </select>
   <select id="getShopcartByUserName" parameterType="java.lang.String" resultMap="shopcartMap1">
      SELECT * FROM shopcart,product WHERE product.id=shopcart.productId AND shopcart.userId = (SELECT id FROM user WHERE userName=#{userName,jdbcType=VARCHAR})
   </select>
    <select id="getShopcartByUserId" parameterType="java.lang.Integer" resultMap="shopcartMap1">
        select * from shopcart,product where product.id=shopcart.productId and shopcart.userId=#{id,jdbcType=TINYINT}
    </select>
    
</mapper>