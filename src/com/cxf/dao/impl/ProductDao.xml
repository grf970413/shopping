<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cxf.dao.ProductDao">
      <resultMap id="productMap1" type="com.cxf.pojo.Product"> 
        <id property="id" column="id"/>
        <result property="productName" column="productName"/>
        <result property="stock" column="stock"/>
        <result property="price" column="price"/>
        <result property="sortId" column="sortId"/>
        <result property="imageAddress" column="imageAddress"/>
        <result property="info" column="info"/> 
    </resultMap>
    <resultMap id="sortMap" type="com.cxf.pojo.Sort"> 
        <id property="id" column="id"/>
        <result property="sortName" column="sortName"/>
        <result property="typeId" column="typeId"/>
        <result property="imgAddress" column="imgAddress"/>

    </resultMap>
     <select id="getProductByName" parameterType="java.lang.String" resultMap="productMap1">
     	select * from product where productName=#{name,jdbcType=VARCHAR} 
     </select>
     <update id="updateProduct" parameterType="com.cxf.pojo.Product">
     	update product set productName=#{productName},stock=#{stock},price=#{price},sortId=#{sortId},imageAddress=#{imageAddress},info=#{info} where id=#{id} 
     </update>
    <!--  <insert id="insertOrder" parameterType="com.cxf.pojo.Order" useGeneratedKeys="true" keyProperty="id">
   		insert into sl_order (orderTime,amount,userId,productId,sumPrice) values (#{orderTime},#{amount},#{userId},#{productId},#{sumPrice})
   </insert>
   -->
   <select id="getType" resultType="java.lang.String">
     	select typeName from productType
   </select>
      <select id="getSort"  parameterType="java.lang.String" resultMap="sortMap">
     	select * from productSort where typeId=(select id from productType where typeName=#{typeName,jdbcType=VARCHAR})
   </select>
   <select id="getProductBySortId" parameterType="java.lang.Integer" resultMap="productMap1">
   		select * from product where sortId=#{sort,jdbcType=TINYINT} 
   </select>
    <select id="getByProductNameById" parameterType="java.lang.Integer" resultType="java.lang.String">
   		select sortName from productSort where id=#{id,jdbcType=TINYINT} 
   </select>
   <select id="getProductById" parameterType="java.lang.Integer" resultMap="productMap1">
   		SELECT * FROM product WHERE id=#{id,jdbcType=TINYINT} 
   </select>
</mapper>